####################################
# Automatically generated by SMake #
# https://github.com/kala13x/smake #
####################################

CFLAGS = -g -O2 -Wall
LIBS = -lpthread
LD_LIBS = ../build/libxutils.a

ifeq ($(XUTILS_USE_SSL),y)
CFLAGS += -D_XUTILS_USE_SSL
LIBS += -lssl -lcrypto
endif

CFLAGS += -I../src \
	-I../src/crypt \
	-I../src/data \
	-I../src/net \
	-I../src/sys

EXECS = xutils \
	xcrypt \
	xhttp \
	xjson \
	xpass \
	xtop \
	xsrc

all: $(EXECS)

$(EXECS): %: %.c
	$(CC) $(CFLAGS) -o $@ $< $(LD_LIBS) $(LIBS)

.PHONY: install
install:
	install -m 0755 xutils /usr/local/bin/
	install -m 0755 xcrypt /usr/local/bin/
	install -m 0755 xpass /usr/local/bin/
	install -m 0755 xjson /usr/local/bin/
	install -m 0755 xhttp /usr/local/bin/
	install -m 0755 xtop /usr/local/bin/
	install -m 0755 xsrc /usr/local/bin/

.PHONY: clean
clean:
	$(RM) $(EXECS)
